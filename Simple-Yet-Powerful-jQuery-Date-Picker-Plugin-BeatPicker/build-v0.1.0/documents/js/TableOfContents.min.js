var TableOfContents=function(){};
TableOfContents.prototype={tableParent:null,contentsParent:null,jsonGenerator:function(a,b){var c={};c[a]={};c[a].meta=[];c[a].meta.item=c[a].meta.hash=a;c[a].meta.childs=[];for(var f in b){var d=b[f];c[a].meta.childs.push(d);var e=b[f].meta=[];c[a][d]={};e.hash=c[a].meta.hash+"/"+d;e.item=d;c[a][d].meta=e}return c[a]},appendTo:function(a,b){a.meta.childs.push(b.meta.item);a[b.meta.item]=b;b.meta.hash=a.meta.hash+"/"+b.meta.item;var c=function(a){for(var b in a.meta.childs){var e=a[a.meta.childs[b]];
e.meta.hash=a.meta.hash+e.meta.hash.substr(e.meta.hash.lastIndexOf("/"));e.meta.childs&&0<e.meta.childs.length&&c(e)}};b.meta.childs&&0<b.meta.childs.length&&c(b);return a},_buildCat:function(a,b,c){var f=c?null:this._domGenerator("ul",{"class":"main-cat"},b);b=this._domGenerator("li",{},c?b:f);this._domGenerator("a",{href:"#"+a.meta.hash},b,a.meta.item);return f},build:function(a){var b=this._domGenerator("div",{"class":"content"},this.tableParent),b=this._buildCat(a,b);this._childBuild(a,b.find("li"))},
_childBuild:function(a,b){var c=null,f;for(f in a.meta.childs){var d=a[a.meta.childs[f]];c?this._buildCat(d,c,!0):c=this._buildCat(d,b);d.meta.childs&&0<d.meta.childs.length&&this._childBuild(d,c.find(">li:last"))}},_domGenerator:function(a,b,c,f,d){a=$(-1===a.indexOf("<")?"<"+a+">":a);return a.attr(b)[a[0].value?"val":"text"](f)[c?d?"prependTo":"appendTo":"andSelf"](c?c:void 0)},_onHashChanged:function(){},_buildContent:function(a,b,c){c=this._domGenerator("div",{"class":"content-parent",id:b},c);
this._domGenerator("h3",{"class":"head-content"},c,a);a=$("div."+b.replace(/\//g,"SEP"));0<a.length&&a.appendTo(c);return c},buildContents:function(a,b,c,f){var d=[];!f&&b&&this._buildContent(b,b,c||this.contentsParent);for(var e in a)if(-1===e.indexOf("_")){var h=a[e],g;g=this.jsonGenerator(e);f&&this.appendTo(f,g);var k=this._buildContent(e,(b?b+"/":"")+g.meta.hash,c||this.contentsParent);!(h instanceof Array)&&h instanceof Object&&this.buildContents(h,b,k,g);d.push(g)}return d}};
